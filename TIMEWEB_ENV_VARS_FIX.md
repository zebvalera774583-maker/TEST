# Исправление ошибки: переменные окружения не заданы

## Проблема:
При сборке на Timeweb возникает ошибка: "Переменная окружения supabaseUrl не задана при сборке приложения"

## Причина:
Переменные окружения не были добавлены в настройки приложения Timeweb или добавлены неправильно.

---

## Решение: Добавить переменные окружения в Timeweb

### Шаг 1: Открыть настройки приложения

1. Войдите в панель Timeweb Cloud
2. Перейдите в раздел **"App Platform"**
3. Найдите ваше приложение (например, "Cute Caelum")
4. Нажмите на него, чтобы открыть
5. Перейдите в раздел **"Настройки"** или **"Settings"**
6. Найдите раздел **"Переменные окружения"** или **"Environment Variables"**

### Шаг 2: Добавить переменные окружения

Добавьте следующие переменные:

#### Обязательные переменные (для клиентской части):

```
NEXT_PUBLIC_SUPABASE_URL=ваш_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=ваш_supabase_anon_key
```

#### Обязательные переменные (для серверной части):

```
SUPABASE_SERVICE_ROLE_KEY=ваш_service_role_key
ADMIN_PASSWORD=ваш_пароль_админа
NODE_ENV=production
```

**Важно:**
- `NEXT_PUBLIC_` префикс обязателен для переменных, используемых в клиентской части
- Переменные добавляются отдельно (каждая на новой строке или в отдельном поле)

### Шаг 3: Где взять значения

#### NEXT_PUBLIC_SUPABASE_URL и NEXT_PUBLIC_SUPABASE_ANON_KEY:
1. Откройте панель Supabase: https://supabase.com/dashboard
2. Выберите ваш проект
3. Перейдите в **Settings** → **API**
4. Скопируйте:
   - **Project URL** → `NEXT_PUBLIC_SUPABASE_URL`
   - **anon public** key → `NEXT_PUBLIC_SUPABASE_ANON_KEY`

#### SUPABASE_SERVICE_ROLE_KEY:
1. В том же разделе Supabase (Settings → API)
2. Найдите **service_role** key (обычно скрыт, нужно нажать "Reveal")
3. Скопируйте → `SUPABASE_SERVICE_ROLE_KEY`

#### ADMIN_PASSWORD:
- Придумайте надежный пароль для входа в админку
- Например: `MySecurePassword123!`

### Шаг 4: Сохранить и пересобрать

1. **Сохраните** переменные окружения
2. **Пересоберите** приложение:
   - Нажмите кнопку **"Пересобрать"** или **"Rebuild"**
   - Или сделайте новый коммит в GitHub (если включен автодеплой)

---

## Как добавить переменные в Timeweb:

### Способ 1: Через настройки приложения

1. Откройте приложение в Timeweb
2. Перейдите в **"Настройки"** → **"Переменные окружения"**
3. Нажмите **"Добавить"** или **"+ Добавить переменную"**
4. Введите:
   - **Имя:** `NEXT_PUBLIC_SUPABASE_URL`
   - **Значение:** `ваш_supabase_url`
5. Нажмите **"Сохранить"**
6. Повторите для всех переменных

### Способ 2: При создании приложения

Если вы еще не завершили создание приложения:
1. В разделе **"6. Настройка приложения"** → **"Переменные"**
2. Нажмите **"Добавить"**
3. Добавьте каждую переменную отдельно

---

## Проверка:

После добавления переменных окружения:

1. **Проверьте список переменных** - все ли добавлены
2. **Проверьте имена** - правильно ли написаны (регистр важен!)
3. **Проверьте значения** - нет ли лишних пробелов
4. **Пересоберите приложение**

---

## Пример правильных переменных:

```
NEXT_PUBLIC_SUPABASE_URL=https://xxxxxxxxxxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
ADMIN_PASSWORD=MySecurePassword123!
NODE_ENV=production
```

**Важно:**
- Без кавычек
- Без пробелов в начале/конце
- Точные значения из Supabase

---

## Если ошибка сохраняется:

1. **Проверьте логи сборки** в Timeweb - там должны быть более подробные ошибки
2. **Проверьте, что переменные сохранены** - иногда нужно пересохранить
3. **Попробуйте удалить и добавить переменные заново**
4. **Обратитесь в поддержку Timeweb** - они могут помочь с настройкой

---

**Добавьте переменные окружения и пересоберите приложение!**

