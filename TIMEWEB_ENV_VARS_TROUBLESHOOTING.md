# Устранение ошибки: переменные окружения добавлены, но не работают

## Ситуация:
Переменные окружения добавлены в Timeweb, но при сборке возникает ошибка: "Переменная окружения supabaseUrl не задана"

## Возможные причины:

### 1. Переменные добавлены после начала сборки

**Решение:**
- Переменные нужно добавлять **ДО** начала сборки
- Или **пересобрать** приложение после добавления переменных

### 2. Переменные не сохранены

**Решение:**
- Убедитесь, что нажали кнопку **"Сохранить"** или **"Применить"**
- Переменные должны быть в списке (как на вашем скриншоте)

### 3. Неправильные значения переменных

**Проверьте значения:**

#### NEXT_PUBLIC_SUPABASE_URL:
- Должен начинаться с `https://`
- Должен заканчиваться на `.supabase.co`
- Пример: `https://xxxxxxxxxxxxx.supabase.co`

#### NEXT_PUBLIC_SUPABASE_ANON_KEY:
- Должен быть длинным (обычно ~200+ символов)
- Начинается с `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...`
- Это JWT токен

#### SUPABASE_SERVICE_ROLE_KEY:
- Должен быть длинным (обычно ~200+ символов)
- Начинается с `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...`
- Это JWT токен (другой, чем anon key)

**Важно:** На вашем скриншоте видно, что значения обрезаны (`...`). Это нормально для интерфейса, но убедитесь, что полные значения сохранены.

### 4. Проблема с ADMIN_PASSWORD

**На вашем скриншоте видно:**
- `ADMIN_PASSWORD` показывает `timeweb.cloud ADMIN_PAS...`

**Это странно!** Возможно:
- Неправильное значение было вставлено
- Или это какой-то placeholder

**Решение:**
- Проверьте значение `ADMIN_PASSWORD`
- Должно быть простым паролем, например: `MyPassword123!`
- Без `timeweb.cloud` в начале

### 5. Нужно пересобрать приложение

**Решение:**
- После добавления/изменения переменных окружения нужно **пересобрать** приложение
- Нажмите кнопку **"Пересобрать"** или **"Rebuild"**
- Или сделайте новый коммит в GitHub (если включен автодеплой)

---

## Что нужно сделать:

### Шаг 1: Проверить значения переменных

1. Нажмите на иконку **карандаша (✏️)** рядом с каждой переменной
2. Проверьте полное значение (не обрезанное)
3. Убедитесь, что значения правильные

### Шаг 2: Проверить ADMIN_PASSWORD

**Особенно проверьте `ADMIN_PASSWORD`:**
- Нажмите на иконку карандаша
- Убедитесь, что значение не содержит `timeweb.cloud`
- Должно быть простым паролем: `MyPassword123!`

### Шаг 3: Пересобрать приложение

1. Сохраните все изменения
2. Найдите кнопку **"Пересобрать"** или **"Rebuild"**
3. Нажмите её
4. Дождитесь новой сборки

---

## Если ошибка сохраняется:

### Проверьте логи сборки

1. В панели Timeweb найдите раздел **"Логи"** или **"Logs"**
2. Посмотрите логи сборки (Build logs)
3. Найдите конкретную ошибку
4. Проверьте, какая именно переменная отсутствует

### Проверьте формат переменных

**Убедитесь, что:**
- Нет лишних пробелов в начале/конце
- Нет кавычек вокруг значений
- Правильный регистр в именах переменных

### Пример правильных переменных:

```
NEXT_PUBLIC_SUPABASE_URL=https://xxxxxxxxxxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh4eHh4eHh4eHh4eHh4eCIsInJvbGUiOiJhbm9uIiwiaWF0IjoxNjE2MjM5MDIyLCJleHAiOjE3Mzc4MTUwMjJ9.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh4eHh4eHh4eHh4eHh4eCIsInJvbGUiOiJzZXJ2aWNlX3JvbGUiLCJpYXQiOjE2MTYyMzkwMjIsImV4cCI6MTczNzgxNTAyMn0.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
ADMIN_PASSWORD=MyPassword123!
NODE_ENV=production
```

---

## Рекомендация:

1. **Проверьте значение `ADMIN_PASSWORD`** - на скриншоте видно странное значение
2. **Проверьте, что все переменные сохранены**
3. **Пересоберите приложение** после проверки переменных

---

**Особенно проверьте `ADMIN_PASSWORD` - там видно что-то странное (`timeweb.cloud ADMIN_PAS...`)!**

